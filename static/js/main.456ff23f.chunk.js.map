{"version":3,"sources":["App.js","Game.js","Scoreboard.js","tensorflow/wordNetIds.js","util/lazyMap.js","util/labelAnchor.js","MobileNetVisualisation.js","util/textMetricsCache.js","hands/RightHandPalmAway.js","hands/LeftHandPalmAway.js","hands/HandsPalmAway.js","Trainer.js","samples/mug.png","samples/ipad.png","samples/lametric.png","registerServiceWorker.js","index.js","tensorflow/classifier.js","tensorflow/samples.js","Layout.js","tensorflow/mobilenet.js","util.js","util/format.js","skipping/Skipping.js","hands/LeftHandPalmFacing.js","hands/RightHandPalmFacing.js","hands/HandsPalmFacing.js","Webcam.js"],"names":["generator","d3fc","startPrice","mu","sigma","GAME_COMPLETE","SCORE_COMPLETE","loadScores","JSON","parse","localStorage","scores","_unused","score","name","App","_this","Object","_Users_chris_pit_trader_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","_Users_chris_pit_trader_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_Users_chris_pit_trader_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","handleFrame","frame","frameConsumer","state","customModel","handlePlayerNameChange","playerName","_this$state","playerIndex","stringify","setState","handleGameComplete","findIndex","_ref","highScore","splice","length","mode","create","data","lastData","global","app","_Users_chris_pit_trader_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__","load","model","console","warn","_context","t0","save","props","history","push","_this2","document","body","addEventListener","_ref2","code","advance","location","pathname","_this3","react__WEBPACK_IMPORTED_MODULE_8___default","a","createElement","Fragment","style","position","width","height","overflow","zIndex","opacity","_Webcam__WEBPACK_IMPORTED_MODULE_14__","onFrame","react_router_dom__WEBPACK_IMPORTED_MODULE_9__","exact","path","render","_Trainer__WEBPACK_IMPORTED_MODULE_13__","onClassifying","ref","_Game__WEBPACK_IMPORTED_MODULE_15__","cash","interval","onComplete","_Scoreboard__WEBPACK_IMPORTED_MODULE_16__","onPlayerNameChange","react_router_dom__WEBPACK_IMPORTED_MODULE_10__","to","_MobileNetVisualisation__WEBPACK_IMPORTED_MODULE_12__","_Layout__WEBPACK_IMPORTED_MODULE_19__","_hands_HandsPalmFacing__WEBPACK_IMPORTED_MODULE_18__","_skipping_Skipping__WEBPACK_IMPORTED_MODULE_17__","Component","withRouter","Game","_Users_chris_pit_trader_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_chris_pit_trader_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","canvas","predictions","wrap","prev","next","classify","sent","find","className","BUY","probability","stop","_x","apply","arguments","index","timer","setTimeout","tick","surface","requestRedraw","yExtent","accessors","d","close","xExtent","date","xScale","d3","yScale","area","crossValue","mainValue","high","baseValue","low","curve","line","on","_d3$event$detail","detail","pixelRatio","_this2$props","chartData","symmetricalAbout","open","yExtentValue","areaPadding","range","domain","ctx","select","node","getContext","alpha","context","decorate","fillStyle","lineCap","lineJoin","lineWidth","strokeStyle","visibleData","slice","requestAnimationFrame","clearTimeout","_this$props","_data$index","unityPosition","shares","Math","floor","delta","updatedCash","acceleratedInterval","_this4","react__WEBPACK_IMPORTED_MODULE_7___default","_Layout__WEBPACK_IMPORTED_MODULE_10__","title","textAlign","fontSize","currency","color","use-device-pixel-ratio","flex","Scoreboard","_Users_chris_pit_trader_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_Users_chris_pit_trader_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_chris_pit_trader_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","onKeyUp","key","match","substr","removeEventListener","_this$props$scores","react__WEBPACK_IMPORTED_MODULE_5___default","_Layout__WEBPACK_IMPORTED_MODULE_6__","margin","background","map","React","wordNetIds","byClassName","byId","keys","IMAGENET_CLASSES","_i","_arr","tensorflow_wordNetIds","value","lazyMap","factory","cache","Map","cachedValue","get","set","util_labelAnchor","x1","y1","x2","y2","MUG","WEBCAM","IPAD","LAMETRIC","MOVING_AVERAGE_COUNT","movingAverage","array","reduce","b","sum","rollLeft","item","MobileNetVisualisation","classCallCheck","possibleConstructorReturn","getPrototypeOf","handleClick","createLazyMap","probabilities","Array","fill","ranks","renderedLabelIds","textMetricsCache","cellsPerColumn","sqrt","cellWidth","cellHeight","offsetLeft","offsetTop","nodes","wordNetId","lookupWordNetId","top","left","shortName","split","center","rank","clearInterval","setInterval","handleTimer","initialiseNodes","font","concat","text","measureText","createTextMetricsCache","symbolGenerator","size","colorScale","circles","min","scale","id","x","y","sort","globalAlpha","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","_ref7","beginPath","setTransform","err","return","labels","filter","_ref3","includes","_ref4","indexOf","textWidth","textHeight","LABEL_FONT_SIZE","_ref5","labelLocations","bounds","labelLayoutStrategy","_ref6","hidden","devicePixelRatio","i","_labels$i","_labelLocations$i","fillRect","fillText","labelAnchor","getLabelAnchor","moveTo","lineTo","stroke","forEach","_ref8","mug","ipad","lametric","_this5","react_default","src","require","bottom","objectFit","display","onClick","RightHandPalmAway","viewBox","LeftHandPalmAway","transform","HandsPalmAway","CLASSIFY_SKIP_COUNT","CAPTURE_SKIP_COUNT","READY_PERIOD","PHASE_COUNT","CAPTURE_COUNT_PER_PHASE","WAITING_FOR_FRAME","WAITING_FOR_MODEL","PENDING_CAPTURE_BUY","CAPTURING_BUY","PENDING_CAPTURE_SELL","CAPTURING_SELL","TRAINING","CLASSIFYING","format","rounded","round","leftPad","Trainer","asyncToGenerator","regenerator_default","buyProbability","sellProbability","skipCount","abrupt","phase","captureCount","sleep","sample","train","trainingProgress","SELL","clearSamples","Layout","padding","max","labelFor","HandsPalmFacing","Skipping","module","exports","__webpack_require__","p","isLocalhost","Boolean","window","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","catch","error","ReactDOM","BrowserRouter","basename","process","getElementById","URL","origin","fetch","response","status","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","CLASS_NAMES","ID_TO_NAME","NAME_TO_ID","NUM_CLASSES","classifier","compile","optimizer","tf","adam","loss","samples","dimensions","add","_len","_key","Error","previous","update","updated","dispose","dimension","clear","createSamplesStore","image","activations","partial","expectedClassIds","toInt","expectedOutput","_x2","progressCallback","Promise","resolve","fit","batchSize","epochs","callbacks","onEpochEnd","_onEpochEnd","_callee2","foo","_context2","_x3","_x4","onTrainEnd","_callee3","_context3","predict","toConsumableArray","_x5","_callee4","_context4","_x6","layers","flatten","inputShape","getPartialShape","dense","units","activation","kernelInitializer","useBias","_callee5","_context5","_x7","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_router_dom__WEBPACK_IMPORTED_MODULE_1__","children","flexDirection","alignItems","justifyContent","flexGrow","flexShrink","modelPromise","loadModel","mobilenet","infer","topk","__webpack_exports__","ms","left_pad__WEBPACK_IMPORTED_MODULE_0__","left_pad__WEBPACK_IMPORTED_MODULE_0___default","currencyFormatter","Intl","NumberFormat","class","LeftHandPalmFacing","RightHandPalmFacing","Webcam","scheduleAnimationFrame","animationFrame","captureFrame","cancelAnimationFrame","webcam","hasUserMedia","video","videoHeight","_this$webcam$video","videoWidth","videoSize","canvasSize","screenshotWidth","translate","drawImage","visibility","react_webcam__WEBPACK_IMPORTED_MODULE_6___default","defaultProps"],"mappings":"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EAAArI,EAAAC,cAAA,mBAEFoI,EAAArI,EAAAC,cAAA,UACEoI,EAAArI,EAAAC,cAAA,kBACAoI,EAAArI,EAAAC,cAAA,mBACAoI,EAAArI,EAAAC,cAAA,oBAGJoI,EAAArI,EAAAC,cAAA,aACEoI,EAAArI,EAAAC,cAAA,UACEoI,EAAArI,EAAAC,cAAA,kBACAoI,EAAArI,EAAAC,cAAA,mBACAoI,EAAArI,EAAAC,cAAA,oBAGJoI,EAAArI,EAAAC,cAAA,aAEI1D,EAAOkM,IAAI,SAAAhJ,EAAkB4D,GAAU,IAAzB5G,EAAyBgD,EAAzBhD,MAAOC,EAAkB+C,EAAlB/C,KACnB,OAAO2L,EAAArI,EAAAC,cAAA,MAAI+H,IAAK3E,GACdgF,EAAArI,EAAAC,cAAA,UAAKoD,EAAQ,GACbgF,EAAArI,EAAAC,cAAA,UAAKsH,YAAS9K,IACd4L,EAAArI,EAAAC,cAAA,UAAKtC,IAAgB0F,EAAQ5F,EAAaf,QAMpD2L,EAAArI,EAAAC,cAAA,mBA/EgCyI,IAAM3G,6CC2+B9C,wGA7+Ba4G,EAAa,CACtB,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,aAGEC,EAAc,GACdC,EAAO,KACOhM,OAAOiM,KAAKC,oBAAhCC,EAAA,EAAAA,EAAAC,EAAA9K,OAAA6K,IAAmD,CAA9C,IAAM3F,EAAK4F,EAAAD,GACZJ,EAAYG,mBAAiB1F,IAAUsF,EAAWtF,GAClDwF,EAAKF,EAAWtF,IAAU0F,mBAAiB1F,GAGhC,IAAA6F,EAAA,SAACC,GAAD,OAAWA,EAAMlB,MAAM,UAAYY,EAAKM,GAASP,EAAYO,4BCp/B7DC,SAAA,SAACC,GACZ,IAAMC,EAAQ,IAAIC,IAClB,OAAO,SAACvB,GACJ,IAAMwB,EAAcF,EAAMG,IAAIzB,GAC9B,GAAmB,MAAfwB,EACA,OAAOA,EAEX,IAAML,EAAQE,EAA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","file":"static/js/main.456ff23f.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Route, withRouter, Redirect } from 'react-router-dom'\nimport MobileNetVisualisation from './MobileNetVisualisation';\nimport Trainer from './Trainer';\nimport Webcam from './Webcam';\nimport Game from './Game';\nimport Scoreboard from './Scoreboard';\nimport Skipping from './skipping/Skipping';\nimport Hands from './hands/HandsPalmFacing';\nimport Layout from './Layout';\nimport { create, load } from './tensorflow/classifier';\nimport * as d3fc from 'd3fc';\n\nconst generator = d3fc.randomFinancial()\n  .startPrice(100)\n  .mu(0.1)\n  .sigma(1.5);\n\nconst TRAINING_COMPLETE = 'training-complete';\nconst GAME_COMPLETE = 'game-complete';\nconst SCORE_COMPLETE = 'score-complete';\n\nconst loadScores = () => {\n  try {\n    return JSON.parse(localStorage.scores);\n  }\n  catch {\n    return [\n      { score: 1047200, name: 'USA' },\n      { score: 985600, name: 'SW' },\n      { score: 874300, name: 'USA' },\n      { score: 7e5, name: 'DK' },\n      { score: 6e5, name: 'DK' },\n      { score: 5e5, name: 'DK' },\n      { score: 4e5, name: 'DK' },\n      { score: 3e5, name: 'DK' },\n      { score: 2e5, name: 'DK' },\n      { score: 1e5, name: 'DK' },\n    ];\n  }\n};\n\nclass App extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      frame: null,\n      customModel: create(),\n      mode: SCORE_COMPLETE,\n      scores: loadScores(),\n      data: generator(100),\n      lastData: generator(100),\n      playerIndex: null\n    };\n    global.app = this;\n  }\n\n  async loadModel() {\n    try {\n      const model = await load('indexeddb://model');\n      this.setState({ customModel: model });\n    }\n    catch (e) {\n      console.warn(e);\n      this.setState({ customModel: create() });\n    }\n  }\n\n  async saveModel() {\n    this.state.customModel.save('indexeddb://model');\n  }\n\n  handleFrame = (frame) => {\n    if (this.frameConsumer == null ||\n      this.state.customModel == null ||\n      this.frameConsumer.handleFrame == null) {\n      return;\n    }\n    this.frameConsumer.handleFrame(frame);\n  }\n\n  advance() {\n    switch (this.state.mode) {\n      case TRAINING_COMPLETE:\n        this.props.history.push('/play');\n        this.setState({\n          data: generator(100),\n          lastData: generator(100),\n          playerIndex: null\n        })\n        return;\n      case GAME_COMPLETE:\n        this.props.history.push('/');\n        this.setState({ mode: SCORE_COMPLETE });\n        return;\n      case SCORE_COMPLETE:\n        this.props.history.push('/train');\n        return;\n    }\n  }\n\n  componentDidMount() {\n    document.body.addEventListener('keyup', ({ code }) => {\n      switch (code) {\n        case 'PageDown':\n          this.advance();\n          return;\n      }\n    });\n    if (this.props.location.pathname === '/train' || this.props.location.pathname === '/play') {\n      this.props.history.push('/');\n    }\n  }\n\n  handlePlayerNameChange = (playerName) => {\n    const { playerIndex, scores } = this.state;\n    if (playerIndex == null) {\n      return;\n    }\n    scores[playerIndex].name = playerName;\n    localStorage.scores = JSON.stringify(scores);\n    this.setState({\n      scores\n    });\n  }\n\n  handleGameComplete = (score) => {\n    const { scores } = this.state;\n    const playerIndex = scores.findIndex(({ score: highScore }) => score > highScore);\n    if (playerIndex >= 0 && playerIndex < 10) {\n      scores.splice(playerIndex, 0, {\n        score,\n        name: ''\n      });\n    }\n    if (scores.length > 10) {\n      scores.length = 10;\n    }\n    this.setState({\n      mode: GAME_COMPLETE,\n      playerIndex: playerIndex < 0 ? null : playerIndex,\n      scores: scores\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div style={{\n          position: 'absolute',\n          width: '100vw',\n          height: '100vh',\n          overflow: 'hidden',\n          zIndex: -1,\n          opacity: 1\n        }} >\n          <Webcam onFrame={this.handleFrame} />\n        </div>\n        <Route exact path='/train' render={() =>\n          <Trainer\n            model={this.state.customModel}\n            onClassifying={() => { this.setState({ mode: TRAINING_COMPLETE }) }}\n            ref={ref => this.frameConsumer = ref} />\n        } />\n        <Route exact path='/play' render={() =>\n          <Game\n            model={this.state.customModel}\n            cash={1e6}\n            lastData={this.state.lastData}\n            data={this.state.data}\n            interval={500}\n            onComplete={this.handleGameComplete}\n            ref={ref => this.frameConsumer = ref} />\n        } />\n        <Route exact path='/' render={() =>\n          <Scoreboard\n            onPlayerNameChange={this.handlePlayerNameChange}\n            scores={this.state.scores}\n            playerIndex={this.state.playerIndex}\n            ref={ref => this.frameConsumer = ref} />\n        } />\n        <Route exact path='/reset' render={() => {\n          delete localStorage.scores;\n          return <Redirect to='/' />;\n        }} />\n        <Route exact path='/mobilenet' render={() =>\n          <MobileNetVisualisation\n            ref={ref => this.frameConsumer = ref}\n          />} />\n        <Route exact path='/hands' render={() =>\n          <Layout><Hands /></Layout>\n        } />\n        <Route exact path='/skipping' render={() =>\n          <Layout><Skipping /></Layout>\n        } />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withRouter(App);\n","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport * as d3fc from 'd3fc';\nimport Layout from './Layout';\nimport { BUY, SELL } from './tensorflow/classifier';\nimport { currency } from './util/format';\n\nexport default class Game extends Component {\n\n  constructor() {\n    super();\n\n    this.state = {\n      index: -3,\n      cash: null,\n      position: null\n    };\n  }\n\n  componentDidMount() {\n    this.timer = setTimeout(() => this.tick(), this.props.interval);\n    this.surface.requestRedraw();\n\n    const yExtent = d3fc.extentLinear()\n      .accessors([d => d.close]);\n\n    const xExtent = d3fc.extentTime()\n      .accessors([d => d.date]);\n\n    const xScale = d3.scaleTime();\n\n    const yScale = d3.scaleLinear();\n\n    const area = d3fc.seriesCanvasArea()\n      .crossValue(d => d.date)\n      .mainValue(d => d.high)\n      .baseValue(d => d.low)\n      .curve(d3.curveStepBefore)\n      .xScale(xScale)\n      .yScale(yScale);\n\n    const line = d3fc.seriesCanvasLine()\n      .crossValue(d => d.date)\n      .mainValue(d => d.close)\n      .curve(d3.curveStep)\n      .xScale(xScale)\n      .yScale(yScale);\n\n    const surface = d3.select(this.surface)\n      .on('draw', () => {\n        const { width, height, pixelRatio } = d3.event.detail;\n        const { data, lastData } = this.props;\n\n        const chartData = index <= 0 ? lastData : data;\n\n        yExtent.symmetricalAbout(chartData[0].open);\n\n        const yExtentValue = yExtent(chartData);\n        const areaPadding = 0.1 * (yExtentValue[1] - yExtentValue[0]);\n\n        xScale.range([0, width])\n          .domain(xExtent(chartData));\n        yScale.range([height, 0])\n          .domain([yExtentValue[0] - areaPadding, yExtentValue[1] + areaPadding]);\n\n        const { index } = this.state;\n\n        const ctx = surface.select('canvas')\n          .node()\n          .getContext('2d', { alpha: false });\n\n        area.context(ctx)\n          .decorate((ctx) => {\n            ctx.fillStyle = 'white';\n          });\n\n        line.context(ctx)\n          .decorate((ctx) => {\n            ctx.lineCap = 'butt';\n            ctx.lineJoin = 'miter';\n            ctx.lineWidth = 4 * pixelRatio;\n            ctx.strokeStyle = 'black';\n          });\n\n        const visibleData = index <= 0 ? chartData : chartData.slice(0, index + 1);\n\n        area(visibleData);\n        line(visibleData);\n\n        requestAnimationFrame(() => {\n          if (this.surface != null) {\n            this.surface.requestRedraw();\n          }\n        });\n      });\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timer);\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (state.cash == null) {\n      return {\n        cash: props.cash\n      };\n    }\n    return null;\n  }\n\n  tick() {\n    const { data, onComplete, interval } = this.props;\n    const { cash, position, index } = this.state;\n    if (position == null) {\n      this.timer = setTimeout(() => this.tick(), interval);\n      return;\n    }\n    if (index <= 0) {\n      this.setState({\n        index: index + 1\n      })\n      this.timer = setTimeout(() => this.tick(), interval);\n      return;\n    }\n    const { open, close } = data[index];\n    const unityPosition = position >= 0 ? +1 : -1;\n    const shares = Math.floor(cash / open);\n    const delta = -1 * unityPosition * shares * open + unityPosition * shares * close;\n    const updatedCash = cash + delta;\n    this.setState({\n      delta,\n      cash: updatedCash,\n      index: index + 1\n    });\n    if (index === data.length - 1) {\n      onComplete(updatedCash);\n      this.setState({\n        delta: null\n      });\n      return;\n    }\n    const acceleratedInterval = interval * (1 - index / data.length);\n    this.timer = setTimeout(() => this.tick(), acceleratedInterval);\n  }\n\n  handleFrame = async (canvas) => {\n    const predictions = await this.props.model.classify(canvas);\n    const position = predictions.find(({ className }) => className === BUY).probability * 2 - 1;\n    this.setState({\n      position\n    });\n  }\n\n  render() {\n    return (\n      <Layout\n        title={\n          <React.Fragment>\n            <div style={{\n              textAlign: 'left',\n              fontSize: '8vh',\n              width: '20%'\n            }}>\n              {this.state.position != null &&\n                this.state.position >= 0 ? 'Long' : 'Short'}\n            </div>\n            <div style={{\n              textAlign: 'center',\n              fontSize: '8vh',\n              width: '50%'\n            }}>\n              {this.state.index < 0 ? 'Get Ready' : currency(this.state.cash)}\n            </div>\n            <div style={{\n              textAlign: 'right',\n              fontSize: '4vh',\n              width: '20%',\n              color: this.state.delta < 0 ? 'red' : this.state.delta > 0 ? 'green' : 'inherit'\n            }}>\n              {this.state.index >= this.props.data.length ?\n                'Game Over' :\n                this.state.delta != null && currency(this.state.delta)}\n            </div>\n          </React.Fragment>\n        }>\n        <d3fc-canvas\n          use-device-pixel-ratio\n          style={{ flex: 'auto', opacity: 1 }}\n          ref={surface => this.surface = surface}></d3fc-canvas>\n      </Layout>\n    );\n  }\n}\n\n","import React from 'react';\nimport Layout from './Layout';\nimport { currency } from './util/format';\n\nexport default class Scoreboard extends React.Component {\n\n  constructor() {\n    super();\n    this.state = {\n      playerName: ''\n    };\n  }\n\n  componentDidMount() {\n    document.body.addEventListener('keyup', this.onKeyUp);\n  }\n\n  componentWillUnmount() {\n    document.body.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  onKeyUp = ({ key }) => {\n    if (this.props.playerIndex == null) {\n      return;\n    }\n    let playerName = this.state.playerName;\n    if (key.match(/^[a-z]$/i)) {\n      playerName = playerName + key;\n      playerName = playerName.substr(0, 3);\n    } else if (key === 'Backspace') {\n      playerName = playerName.substr(0, playerName.length - 1);\n    }\n    this.setState({\n      playerName\n    });\n    this.props.onPlayerNameChange(playerName);\n  }\n\n  render() {\n    const { scores = [], playerIndex } = this.props;\n    const { playerName } = this.state;\n    return <Layout title={\n      <div style={{ fontSize: '8vh' }}>Pit Trader</div>\n    }>\n      <div style={{ width: '50%', margin: 'auto', fontSize: '4vh', background: 'white', textAlign: 'center' }}>\n        <p>High Scores</p>\n        <table style={{ width: '100%' }}>\n          <thead>\n            <tr>\n              <td>----</td>\n              <td>-----</td>\n              <td>----</td>\n            </tr>\n            <tr>\n              <td>Rank</td>\n              <td>Score</td>\n              <td>Name</td>\n            </tr>\n            <tr>\n              <td>----</td>\n              <td>-----</td>\n              <td>----</td>\n            </tr>\n          </thead>\n          <tfoot>\n            <tr>\n              <td>----</td>\n              <td>-----</td>\n              <td>----</td>\n            </tr>\n          </tfoot>\n          <tbody>\n            {\n              scores.map(({ score, name }, index) => {\n                return <tr key={index}>\n                  <td>{index + 1}</td>\n                  <td>{currency(score)}</td>\n                  <td>{playerIndex === index ? playerName : name}</td>\n                </tr>;\n              })\n            }\n          </tbody>\n        </table>\n        <p></p>\n      </div>\n    </Layout >\n  }\n}","import { IMAGENET_CLASSES } from '@tensorflow-models/mobilenet/dist/imagenet_classes';\n\nexport const wordNetIds = [\n    'n01440764',\n    'n01443537',\n    'n01484850',\n    'n01491361',\n    'n01494475',\n    'n01496331',\n    'n01498041',\n    'n01514668',\n    'n01514859',\n    'n01518878',\n    'n01530575',\n    'n01531178',\n    'n01532829',\n    'n01534433',\n    'n01537544',\n    'n01558993',\n    'n01560419',\n    'n01580077',\n    'n01582220',\n    'n01592084',\n    'n01601694',\n    'n01608432',\n    'n01614925',\n    'n01616318',\n    'n01622779',\n    'n01629819',\n    'n01630670',\n    'n01631663',\n    'n01632458',\n    'n01632777',\n    'n01641577',\n    'n01644373',\n    'n01644900',\n    'n01664065',\n    'n01665541',\n    'n01667114',\n    'n01667778',\n    'n01669191',\n    'n01675722',\n    'n01677366',\n    'n01682714',\n    'n01685808',\n    'n01687978',\n    'n01688243',\n    'n01689811',\n    'n01692333',\n    'n01693334',\n    'n01694178',\n    'n01695060',\n    'n01697457',\n    'n01698640',\n    'n01704323',\n    'n01728572',\n    'n01728920',\n    'n01729322',\n    'n01729977',\n    'n01734418',\n    'n01735189',\n    'n01737021',\n    'n01739381',\n    'n01740131',\n    'n01742172',\n    'n01744401',\n    'n01748264',\n    'n01749939',\n    'n01751748',\n    'n01753488',\n    'n01755581',\n    'n01756291',\n    'n01768244',\n    'n01770081',\n    'n01770393',\n    'n01773157',\n    'n01773549',\n    'n01773797',\n    'n01774384',\n    'n01774750',\n    'n01775062',\n    'n01776313',\n    'n01784675',\n    'n01795545',\n    'n01796340',\n    'n01797886',\n    'n01798484',\n    'n01806143',\n    'n01806567',\n    'n01807496',\n    'n01817953',\n    'n01818515',\n    'n01819313',\n    'n01820546',\n    'n01824575',\n    'n01828970',\n    'n01829413',\n    'n01833805',\n    'n01843065',\n    'n01843383',\n    'n01847000',\n    'n01855032',\n    'n01855672',\n    'n01860187',\n    'n01871265',\n    'n01872401',\n    'n01873310',\n    'n01877812',\n    'n01882714',\n    'n01883070',\n    'n01910747',\n    'n01914609',\n    'n01917289',\n    'n01924916',\n    'n01930112',\n    'n01943899',\n    'n01944390',\n    'n01945685',\n    'n01950731',\n    'n01955084',\n    'n01968897',\n    'n01978287',\n    'n01978455',\n    'n01980166',\n    'n01981276',\n    'n01983481',\n    'n01984695',\n    'n01985128',\n    'n01986214',\n    'n01990800',\n    'n02002556',\n    'n02002724',\n    'n02006656',\n    'n02007558',\n    'n02009229',\n    'n02009912',\n    'n02011460',\n    'n02012849',\n    'n02013706',\n    'n02017213',\n    'n02018207',\n    'n02018795',\n    'n02025239',\n    'n02027492',\n    'n02028035',\n    'n02033041',\n    'n02037110',\n    'n02051845',\n    'n02056570',\n    'n02058221',\n    'n02066245',\n    'n02071294',\n    'n02074367',\n    'n02077923',\n    'n02085620',\n    'n02085782',\n    'n02085936',\n    'n02086079',\n    'n02086240',\n    'n02086646',\n    'n02086910',\n    'n02087046',\n    'n02087394',\n    'n02088094',\n    'n02088238',\n    'n02088364',\n    'n02088466',\n    'n02088632',\n    'n02089078',\n    'n02089867',\n    'n02089973',\n    'n02090379',\n    'n02090622',\n    'n02090721',\n    'n02091032',\n    'n02091134',\n    'n02091244',\n    'n02091467',\n    'n02091635',\n    'n02091831',\n    'n02092002',\n    'n02092339',\n    'n02093256',\n    'n02093428',\n    'n02093647',\n    'n02093754',\n    'n02093859',\n    'n02093991',\n    'n02094114',\n    'n02094258',\n    'n02094433',\n    'n02095314',\n    'n02095570',\n    'n02095889',\n    'n02096051',\n    'n02096177',\n    'n02096294',\n    'n02096437',\n    'n02096585',\n    'n02097047',\n    'n02097130',\n    'n02097209',\n    'n02097298',\n    'n02097474',\n    'n02097658',\n    'n02098105',\n    'n02098286',\n    'n02098413',\n    'n02099267',\n    'n02099429',\n    'n02099601',\n    'n02099712',\n    'n02099849',\n    'n02100236',\n    'n02100583',\n    'n02100735',\n    'n02100877',\n    'n02101006',\n    'n02101388',\n    'n02101556',\n    'n02102040',\n    'n02102177',\n    'n02102318',\n    'n02102480',\n    'n02102973',\n    'n02104029',\n    'n02104365',\n    'n02105056',\n    'n02105162',\n    'n02105251',\n    'n02105412',\n    'n02105505',\n    'n02105641',\n    'n02105855',\n    'n02106030',\n    'n02106166',\n    'n02106382',\n    'n02106550',\n    'n02106662',\n    'n02107142',\n    'n02107312',\n    'n02107574',\n    'n02107683',\n    'n02107908',\n    'n02108000',\n    'n02108089',\n    'n02108422',\n    'n02108551',\n    'n02108915',\n    'n02109047',\n    'n02109525',\n    'n02109961',\n    'n02110063',\n    'n02110185',\n    'n02110341',\n    'n02110627',\n    'n02110806',\n    'n02110958',\n    'n02111129',\n    'n02111277',\n    'n02111500',\n    'n02111889',\n    'n02112018',\n    'n02112137',\n    'n02112350',\n    'n02112706',\n    'n02113023',\n    'n02113186',\n    'n02113624',\n    'n02113712',\n    'n02113799',\n    'n02113978',\n    'n02114367',\n    'n02114548',\n    'n02114712',\n    'n02114855',\n    'n02115641',\n    'n02115913',\n    'n02116738',\n    'n02117135',\n    'n02119022',\n    'n02119789',\n    'n02120079',\n    'n02120505',\n    'n02123045',\n    'n02123159',\n    'n02123394',\n    'n02123597',\n    'n02124075',\n    'n02125311',\n    'n02127052',\n    'n02128385',\n    'n02128757',\n    'n02128925',\n    'n02129165',\n    'n02129604',\n    'n02130308',\n    'n02132136',\n    'n02133161',\n    'n02134084',\n    'n02134418',\n    'n02137549',\n    'n02138441',\n    'n02165105',\n    'n02165456',\n    'n02167151',\n    'n02168699',\n    'n02169497',\n    'n02172182',\n    'n02174001',\n    'n02177972',\n    'n02190166',\n    'n02206856',\n    'n02219486',\n    'n02226429',\n    'n02229544',\n    'n02231487',\n    'n02233338',\n    'n02236044',\n    'n02256656',\n    'n02259212',\n    'n02264363',\n    'n02268443',\n    'n02268853',\n    'n02276258',\n    'n02277742',\n    'n02279972',\n    'n02280649',\n    'n02281406',\n    'n02281787',\n    'n02317335',\n    'n02319095',\n    'n02321529',\n    'n02325366',\n    'n02326432',\n    'n02328150',\n    'n02342885',\n    'n02346627',\n    'n02356798',\n    'n02361337',\n    'n02363005',\n    'n02364673',\n    'n02389026',\n    'n02391049',\n    'n02395406',\n    'n02396427',\n    'n02397096',\n    'n02398521',\n    'n02403003',\n    'n02408429',\n    'n02410509',\n    'n02412080',\n    'n02415577',\n    'n02417914',\n    'n02422106',\n    'n02422699',\n    'n02423022',\n    'n02437312',\n    'n02437616',\n    'n02441942',\n    'n02442845',\n    'n02443114',\n    'n02443484',\n    'n02444819',\n    'n02445715',\n    'n02447366',\n    'n02454379',\n    'n02457408',\n    'n02480495',\n    'n02480855',\n    'n02481823',\n    'n02483362',\n    'n02483708',\n    'n02484975',\n    'n02486261',\n    'n02486410',\n    'n02487347',\n    'n02488291',\n    'n02488702',\n    'n02489166',\n    'n02490219',\n    'n02492035',\n    'n02492660',\n    'n02493509',\n    'n02493793',\n    'n02494079',\n    'n02497673',\n    'n02500267',\n    'n02504013',\n    'n02504458',\n    'n02509815',\n    'n02510455',\n    'n02514041',\n    'n02526121',\n    'n02536864',\n    'n02606052',\n    'n02607072',\n    'n02640242',\n    'n02641379',\n    'n02643566',\n    'n02655020',\n    'n02666196',\n    'n02667093',\n    'n02669723',\n    'n02672831',\n    'n02676566',\n    'n02687172',\n    'n02690373',\n    'n02692877',\n    'n02699494',\n    'n02701002',\n    'n02704792',\n    'n02708093',\n    'n02727426',\n    'n02730930',\n    'n02747177',\n    'n02749479',\n    'n02769748',\n    'n02776631',\n    'n02777292',\n    'n02782093',\n    'n02783161',\n    'n02786058',\n    'n02787622',\n    'n02788148',\n    'n02790996',\n    'n02791124',\n    'n02791270',\n    'n02793495',\n    'n02794156',\n    'n02795169',\n    'n02797295',\n    'n02799071',\n    'n02802426',\n    'n02804414',\n    'n02804610',\n    'n02807133',\n    'n02808304',\n    'n02808440',\n    'n02814533',\n    'n02814860',\n    'n02815834',\n    'n02817516',\n    'n02823428',\n    'n02823750',\n    'n02825657',\n    'n02834397',\n    'n02835271',\n    'n02837789',\n    'n02840245',\n    'n02841315',\n    'n02843684',\n    'n02859443',\n    'n02860847',\n    'n02865351',\n    'n02869837',\n    'n02870880',\n    'n02871525',\n    'n02877765',\n    'n02879718',\n    'n02883205',\n    'n02892201',\n    'n02892767',\n    'n02894605',\n    'n02895154',\n    'n02906734',\n    'n02909870',\n    'n02910353',\n    'n02916936',\n    'n02917067',\n    'n02927161',\n    'n02930766',\n    'n02939185',\n    'n02948072',\n    'n02950826',\n    'n02951358',\n    'n02951585',\n    'n02963159',\n    'n02965783',\n    'n02966193',\n    'n02966687',\n    'n02971356',\n    'n02974003',\n    'n02977058',\n    'n02978881',\n    'n02979186',\n    'n02980441',\n    'n02981792',\n    'n02988304',\n    'n02992211',\n    'n02992529',\n    'n02999410',\n    'n03000134',\n    'n03000247',\n    'n03000684',\n    'n03014705',\n    'n03016953',\n    'n03017168',\n    'n03018349',\n    'n03026506',\n    'n03028079',\n    'n03032252',\n    'n03041632',\n    'n03042490',\n    'n03045698',\n    'n03047690',\n    'n03062245',\n    'n03063599',\n    'n03063689',\n    'n03065424',\n    'n03075370',\n    'n03085013',\n    'n03089624',\n    'n03095699',\n    'n03100240',\n    'n03109150',\n    'n03110669',\n    'n03124043',\n    'n03124170',\n    'n03125729',\n    'n03126707',\n    'n03127747',\n    'n03127925',\n    'n03131574',\n    'n03133878',\n    'n03134739',\n    'n03141823',\n    'n03146219',\n    'n03160309',\n    'n03179701',\n    'n03180011',\n    'n03187595',\n    'n03188531',\n    'n03196217',\n    'n03197337',\n    'n03201208',\n    'n03207743',\n    'n03207941',\n    'n03208938',\n    'n03216828',\n    'n03218198',\n    'n03220513',\n    'n03223299',\n    'n03240683',\n    'n03249569',\n    'n03250847',\n    'n03255030',\n    'n03259280',\n    'n03271574',\n    'n03272010',\n    'n03272562',\n    'n03290653',\n    'n03291819',\n    'n03297495',\n    'n03314780',\n    'n03325584',\n    'n03337140',\n    'n03344393',\n    'n03345487',\n    'n03347037',\n    'n03355925',\n    'n03372029',\n    'n03376595',\n    'n03379051',\n    'n03384352',\n    'n03388043',\n    'n03388183',\n    'n03388549',\n    'n03393912',\n    'n03394916',\n    'n03400231',\n    'n03404251',\n    'n03417042',\n    'n03424325',\n    'n03425413',\n    'n03443371',\n    'n03444034',\n    'n03445777',\n    'n03445924',\n    'n03447447',\n    'n03447721',\n    'n03450230',\n    'n03452741',\n    'n03457902',\n    'n03459775',\n    'n03461385',\n    'n03467068',\n    'n03476684',\n    'n03476991',\n    'n03478589',\n    'n03481172',\n    'n03482405',\n    'n03483316',\n    'n03485407',\n    'n03485794',\n    'n03492542',\n    'n03494278',\n    'n03495258',\n    'n03496892',\n    'n03498962',\n    'n03527444',\n    'n03529860',\n    'n03530642',\n    'n03532672',\n    'n03534580',\n    'n03535780',\n    'n03538406',\n    'n03544143',\n    'n03584254',\n    'n03584829',\n    'n03590841',\n    'n03594734',\n    'n03594945',\n    'n03595614',\n    'n03598930',\n    'n03599486',\n    'n03602883',\n    'n03617480',\n    'n03623198',\n    'n03627232',\n    'n03630383',\n    'n03633091',\n    'n03637318',\n    'n03642806',\n    'n03649909',\n    'n03657121',\n    'n03658185',\n    'n03661043',\n    'n03662601',\n    'n03666591',\n    'n03670208',\n    'n03673027',\n    'n03676483',\n    'n03680355',\n    'n03690938',\n    'n03691459',\n    'n03692522',\n    'n03697007',\n    'n03706229',\n    'n03709823',\n    'n03710193',\n    'n03710637',\n    'n03710721',\n    'n03717622',\n    'n03720891',\n    'n03721384',\n    'n03724870',\n    'n03729826',\n    'n03733131',\n    'n03733281',\n    'n03733805',\n    'n03742115',\n    'n03743016',\n    'n03759954',\n    'n03761084',\n    'n03763968',\n    'n03764736',\n    'n03769881',\n    'n03770439',\n    'n03770679',\n    'n03773504',\n    'n03775071',\n    'n03775546',\n    'n03776460',\n    'n03777568',\n    'n03777754',\n    'n03781244',\n    'n03782006',\n    'n03785016',\n    'n03786901',\n    'n03787032',\n    'n03788195',\n    'n03788365',\n    'n03791053',\n    'n03792782',\n    'n03792972',\n    'n03793489',\n    'n03794056',\n    'n03796401',\n    'n03803284',\n    'n03804744',\n    'n03814639',\n    'n03814906',\n    'n03825788',\n    'n03832673',\n    'n03837869',\n    'n03838899',\n    'n03840681',\n    'n03841143',\n    'n03843555',\n    'n03854065',\n    'n03857828',\n    'n03866082',\n    'n03868242',\n    'n03868863',\n    'n03871628',\n    'n03873416',\n    'n03874293',\n    'n03874599',\n    'n03876231',\n    'n03877472',\n    'n03877845',\n    'n03884397',\n    'n03887697',\n    'n03888257',\n    'n03888605',\n    'n03891251',\n    'n03891332',\n    'n03895866',\n    'n03899768',\n    'n03902125',\n    'n03903868',\n    'n03908618',\n    'n03908714',\n    'n03916031',\n    'n03920288',\n    'n03924679',\n    'n03929660',\n    'n03929855',\n    'n03930313',\n    'n03930630',\n    'n03933933',\n    'n03935335',\n    'n03937543',\n    'n03938244',\n    'n03942813',\n    'n03944341',\n    'n03947888',\n    'n03950228',\n    'n03954731',\n    'n03956157',\n    'n03958227',\n    'n03961711',\n    'n03967562',\n    'n03970156',\n    'n03976467',\n    'n03976657',\n    'n03977966',\n    'n03980874',\n    'n03982430',\n    'n03983396',\n    'n03991062',\n    'n03992509',\n    'n03995372',\n    'n03998194',\n    'n04004767',\n    'n04005630',\n    'n04008634',\n    'n04009552',\n    'n04019541',\n    'n04023962',\n    'n04026417',\n    'n04033901',\n    'n04033995',\n    'n04037443',\n    'n04039381',\n    'n04040759',\n    'n04041544',\n    'n04044716',\n    'n04049303',\n    'n04065272',\n    'n04067472',\n    'n04069434',\n    'n04070727',\n    'n04074963',\n    'n04081281',\n    'n04086273',\n    'n04090263',\n    'n04099969',\n    'n04111531',\n    'n04116512',\n    'n04118538',\n    'n04118776',\n    'n04120489',\n    'n04125021',\n    'n04127249',\n    'n04131690',\n    'n04133789',\n    'n04136333',\n    'n04141076',\n    'n04141327',\n    'n04141975',\n    'n04146614',\n    'n04147183',\n    'n04149813',\n    'n04152593',\n    'n04153751',\n    'n04154565',\n    'n04162706',\n    'n04179913',\n    'n04192698',\n    'n04200800',\n    'n04201297',\n    'n04204238',\n    'n04204347',\n    'n04208210',\n    'n04209133',\n    'n04209239',\n    'n04228054',\n    'n04229816',\n    'n04235860',\n    'n04238763',\n    'n04239074',\n    'n04243546',\n    'n04251144',\n    'n04252077',\n    'n04252225',\n    'n04254120',\n    'n04254680',\n    'n04254777',\n    'n04258138',\n    'n04259630',\n    'n04263257',\n    'n04264628',\n    'n04265275',\n    'n04266014',\n    'n04270147',\n    'n04273569',\n    'n04275548',\n    'n04277352',\n    'n04285008',\n    'n04286575',\n    'n04296562',\n    'n04310018',\n    'n04311004',\n    'n04311174',\n    'n04317175',\n    'n04325704',\n    'n04326547',\n    'n04328186',\n    'n04330267',\n    'n04332243',\n    'n04335435',\n    'n04336792',\n    'n04344873',\n    'n04346328',\n    'n04347754',\n    'n04350905',\n    'n04355338',\n    'n04355933',\n    'n04356056',\n    'n04357314',\n    'n04366367',\n    'n04367480',\n    'n04370456',\n    'n04371430',\n    'n04371774',\n    'n04372370',\n    'n04376876',\n    'n04380533',\n    'n04389033',\n    'n04392985',\n    'n04398044',\n    'n04399382',\n    'n04404412',\n    'n04409515',\n    'n04417672',\n    'n04418357',\n    'n04423845',\n    'n04428191',\n    'n04429376',\n    'n04435653',\n    'n04442312',\n    'n04443257',\n    'n04447861',\n    'n04456115',\n    'n04458633',\n    'n04461696',\n    'n04462240',\n    'n04465501',\n    'n04467665',\n    'n04476259',\n    'n04479046',\n    'n04482393',\n    'n04483307',\n    'n04485082',\n    'n04486054',\n    'n04487081',\n    'n04487394',\n    'n04493381',\n    'n04501370',\n    'n04505470',\n    'n04507155',\n    'n04509417',\n    'n04515003',\n    'n04517823',\n    'n04522168',\n    'n04523525',\n    'n04525038',\n    'n04525305',\n    'n04532106',\n    'n04532670',\n    'n04536866',\n    'n04540053',\n    'n04542943',\n    'n04548280',\n    'n04548362',\n    'n04550184',\n    'n04552348',\n    'n04553703',\n    'n04554684',\n    'n04557648',\n    'n04560804',\n    'n04562935',\n    'n04579145',\n    'n04579432',\n    'n04584207',\n    'n04589890',\n    'n04590129',\n    'n04591157',\n    'n04591713',\n    'n04592741',\n    'n04596742',\n    'n04597913',\n    'n04599235',\n    'n04604644',\n    'n04606251',\n    'n04612504',\n    'n04613696',\n    'n06359193',\n    'n06596364',\n    'n06785654',\n    'n06794110',\n    'n06874185',\n    'n07248320',\n    'n07565083',\n    'n07579787',\n    'n07583066',\n    'n07584110',\n    'n07590611',\n    'n07613480',\n    'n07614500',\n    'n07615774',\n    'n07684084',\n    'n07693725',\n    'n07695742',\n    'n07697313',\n    'n07697537',\n    'n07711569',\n    'n07714571',\n    'n07714990',\n    'n07715103',\n    'n07716358',\n    'n07716906',\n    'n07717410',\n    'n07717556',\n    'n07718472',\n    'n07718747',\n    'n07720875',\n    'n07730033',\n    'n07734744',\n    'n07742313',\n    'n07745940',\n    'n07747607',\n    'n07749582',\n    'n07753113',\n    'n07753275',\n    'n07753592',\n    'n07754684',\n    'n07760859',\n    'n07768694',\n    'n07802026',\n    'n07831146',\n    'n07836838',\n    'n07860988',\n    'n07871810',\n    'n07873807',\n    'n07875152',\n    'n07880968',\n    'n07892512',\n    'n07920052',\n    'n07930864',\n    'n07932039',\n    'n09193705',\n    'n09229709',\n    'n09246464',\n    'n09256479',\n    'n09288635',\n    'n09332890',\n    'n09399592',\n    'n09421951',\n    'n09428293',\n    'n09468604',\n    'n09472597',\n    'n09835506',\n    'n10148035',\n    'n10565667',\n    'n11879895',\n    'n11939491',\n    'n12057211',\n    'n12144580',\n    'n12267677',\n    'n12620546',\n    'n12768682',\n    'n12985857',\n    'n12998815',\n    'n13037406',\n    'n13040303',\n    'n13044778',\n    'n13052670',\n    'n13054560',\n    'n13133613',\n    'n15075141'\n];\n\nconst byClassName = {};\nconst byId = {};\nfor (const index of Object.keys(IMAGENET_CLASSES)) {\n    byClassName[IMAGENET_CLASSES[index]] = wordNetIds[index];\n    byId[wordNetIds[index]] = IMAGENET_CLASSES[index];\n}\n\nexport default (value) => value.match(/n\\d{8}/) ? byId[value] : byClassName[value];\n","export default (factory) => {\n    const cache = new Map();\n    return (key) => {\n        const cachedValue = cache.get(key);\n        if (cachedValue != null) {\n            return cachedValue;\n        }\n        const value = factory(key);\n        cache.set(key, value);\n        return value;\n    };\n};\n","export default ({ width, height, location, margin }) => {\n    switch (location) {\n        case 'bottom-left':\n            return { x1: width, y1: 0, x2: width - margin, y2: margin };\n        case 'top-left':\n            return { x1: width, y1: height, x2: width - margin, y2: height - margin };\n        case 'top-right':\n            return { x1: 0, y1: height, x2: margin, y2: height - margin };\n        case 'middle-right':\n            return { x1: 0, y1: height / 2, x2: margin, y2: height / 2 };\n        case 'bottom-center':\n            return { x1: width / 2, y1: 0, x2: width / 2, y2: margin };\n        case 'middle-left':\n            return { x1: width, y1: height / 2, x2: width - margin, y2: height / 2 };\n        case 'top-center':\n            return { x1: width / 2, y1: height, x2: width / 2, y2: height - margin };\n        case 'bottom-right':\n        default:\n            return { x1: 0, y1: 0, x2: margin, y2: margin };\n    }\n};","import React, { Component } from 'react';\nimport { classify } from './tensorflow/mobilenet';\nimport lookupWordNetId, { wordNetIds } from './tensorflow/wordNetIds';\nimport Webcam from './Webcam';\nimport * as d3 from 'd3';\nimport * as d3fc from 'd3fc';\nimport { sleep } from './util';\nimport createTextMetricsCache from './util/textMetricsCache';\nimport createLazyMap from './util/lazyMap';\nimport getLabelAnchor from './util/labelAnchor';\n\nconst MUG = 'mug';\nconst WEBCAM = 'webcam';\nconst IPAD = 'ipad';\nconst LAMETRIC = 'lametric';\n\nconst SYMBOL_SIZE_SCALE = 100;\nconst SYMBOL_SIZE_MIN = 0.001;\nconst MOVING_AVERAGE_COUNT = 5;\nconst LABEL_FONT_SIZE = 24;\nconst LABEL_VERTICAL_OFFSET = 0.75;\nconst LABEL_MARGIN = LABEL_FONT_SIZE * 2;\nconst ANCHOR_MARGIN = LABEL_FONT_SIZE * 0.9;\n\nconst sum = array => array.reduce((a, b) => a + b, 0);\n\nconst movingAverage = array => sum(array) / array.length;\n\nconst rollLeft = (array, item) => {\n  array.splice(0, 1);\n  array.push(item);\n};\n\nconst compare = (a, b) => {\n  if (a > b) {\n    return 1;\n  }\n  if (a < b) {\n    return -1;\n  }\n  return 0;\n};\n\nclass MobileNetVisualisation extends Component {\n\n  constructor() {\n    super();\n    this.predictions = createLazyMap(() => ({\n      probabilities: new Array(MOVING_AVERAGE_COUNT).fill(0),\n      ranks: new Array(MOVING_AVERAGE_COUNT).fill(1000),\n    }));\n    this.renderedLabelIds = [];\n    this.textMetricsCache = null;\n    this.state = {\n      mode: MUG\n    };\n  }\n\n  initialiseNodes(width, height) {\n    const cellsPerColumn = Math.floor(Math.sqrt(wordNetIds.length));\n    const cellWidth = width / cellsPerColumn;\n    const cellHeight = height / cellsPerColumn;\n    const offsetLeft = cellWidth / 2;\n    const offsetTop = cellHeight / 2;\n\n    this.nodes = d3.shuffle(wordNetIds.slice())\n      .map((wordNetId, index) => {\n        const className = lookupWordNetId(wordNetId);\n        const top = (index % cellsPerColumn) * cellHeight;\n        const left = Math.floor(index / cellsPerColumn) * cellWidth;\n        return {\n          index,\n          wordNetId,\n          className,\n          shortName: className.split(',')[0],\n          top,\n          left,\n          center: [left + offsetLeft, top + offsetTop],\n          width: cellWidth,\n          height: cellHeight,\n          probability: () => movingAverage(this.predictions(wordNetId).probabilities),\n          rank: () => movingAverage(this.predictions(wordNetId).ranks)\n        };\n      });\n\n    // this.nodes = d3.shuffle(this.nodes);\n  }\n\n  handleClick = ({ key }) => {\n    switch (this.state.mode) {\n      case MUG:\n        this.setState({ mode: LAMETRIC });\n        return;\n      case LAMETRIC:\n        this.setState({ mode: IPAD });\n        return;\n      case IPAD:\n        this.setState({ mode: WEBCAM });\n        return;\n      case WEBCAM:\n        this.setState({ mode: MUG });\n        return;\n    }\n  };\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  componentDidMount() {\n    this.timer = setInterval(() => this.handleTimer(), 100);\n\n    const surface = d3.select(this.surface)\n      .on('draw', () => {\n        const { width, height, pixelRatio } = d3.event.detail;\n\n        const ctx = surface.select('canvas')\n          .node()\n          .getContext('2d');\n\n        if (this.nodes == null) {\n          this.initialiseNodes(width, height);\n        }\n\n        ctx.font = `${LABEL_FONT_SIZE * pixelRatio}px sans-serif`;\n\n        if (this.textMetricsCache == null) {\n          this.textMetricsCache = createTextMetricsCache(ctx);\n        }\n\n        const symbolGenerator = d3.symbol()\n          .size(d => d)\n          .context(ctx);\n\n        const colorScale = d3.scaleSequential(d3.interpolateSinebow)\n          .domain([0, this.nodes.length]);\n\n        const circles = this.nodes.map(node => {\n          const length = Math.min(node.width, node.height);\n          const area = length * length;\n          const scale = area * SYMBOL_SIZE_SCALE;\n          const size = (node.probability() + SYMBOL_SIZE_MIN) * scale;\n          return {\n            node,\n            id: node.index,\n            x: node.center[0],\n            y: node.center[1],\n            size\n          };\n        })\n          .sort((a, b) => a.size - b.size);\n\n        ctx.globalAlpha = 0.6;\n        ctx.strokeStyle = 'white';\n\n        for (const { id, x, y, size } of circles) {\n          ctx.beginPath();\n          ctx.setTransform(1, 0, 0, 1, x, y);\n          ctx.fillStyle = colorScale(id);\n          symbolGenerator(size);\n          ctx.fill();\n        }\n\n        const labels = this.nodes.filter(({ wordNetId, rank }) =>\n          rank() <= (this.renderedLabelIds.includes(wordNetId) ? 20 : 5)\n        )\n          .map(({ wordNetId, shortName, center, rank }) => {\n            let index = this.renderedLabelIds.indexOf(wordNetId);\n            if (index === -1) {\n              index = this.renderedLabelIds.length + rank();\n            }\n            const text = shortName;\n            const textWidth = this.textMetricsCache(text).width;\n            const textHeight = LABEL_FONT_SIZE * pixelRatio;\n            return {\n              id: wordNetId,\n              index,\n              text,\n              textWidth,\n              textHeight,\n              width: textWidth + LABEL_MARGIN,\n              height: textHeight + LABEL_MARGIN,\n              x: center[0],\n              y: center[1]\n            };\n          })\n          .sort((a, b) => a.index - b.index);\n\n        this.renderedLabelIds = labels.map(({ id }) => id);\n\n        const labelLayoutStrategy = d3fc.layoutGreedy()\n          .bounds({\n            x: 0,\n            y: 0,\n            width,\n            height\n          });\n\n        const labelLocations = labelLayoutStrategy(labels.map(({ x, y, width, height }) => ({\n          x,\n          y,\n          width,\n          height,\n          hidden: false\n        })))\n\n        ctx.globalAlpha = 0.8;\n\n        ctx.strokeStyle = 'gray';\n        ctx.lineCap = 'round';\n        ctx.lineWidth = 2 * devicePixelRatio;\n\n        for (let i = 0; i < labels.length; i++) {\n          const { text, textWidth, textHeight } = labels[i];\n          const { x, y, width, height, location } = labelLocations[i];\n          ctx.setTransform(1, 0, 0, 1, x, y);\n          ctx.fillStyle = 'white';\n          ctx.fillRect(ANCHOR_MARGIN, ANCHOR_MARGIN, width - 2 * ANCHOR_MARGIN, height - 2 * ANCHOR_MARGIN);\n          ctx.fillStyle = 'black';\n          ctx.fillText(text, (width - textWidth) / 2, (height - textHeight) / 2 + LABEL_VERTICAL_OFFSET * textHeight);\n          const labelAnchor = getLabelAnchor({\n            width,\n            height,\n            location,\n            margin: ANCHOR_MARGIN\n          });\n          ctx.beginPath();\n          ctx.moveTo(labelAnchor.x1, labelAnchor.y1);\n          ctx.lineTo(labelAnchor.x2, labelAnchor.y2);\n          ctx.stroke();\n        }\n      });\n  }\n\n  async handleTimer() {\n    if (this.frame == null) {\n      return;\n    }\n    const predictions = await classify(this.frame, 1000);\n    predictions.forEach(({ className, probability }, index) => {\n      const wordNetId = lookupWordNetId(className);\n      const item = this.predictions(wordNetId);\n      rollLeft(item.ranks, index);\n      rollLeft(item.probabilities, probability);\n    });\n\n    this.surface.requestRedraw();\n  }\n\n  handleFrame(frame) {\n    switch (this.state.mode) {\n      case WEBCAM:\n        this.frame = frame;\n        return;\n      case MUG:\n        this.frame = this.mug;\n        return;\n      case IPAD:\n        this.frame = this.ipad;\n        return;\n      case LAMETRIC:\n        this.frame = this.lametric;\n        return;\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <img\n          ref={ref => this.mug = ref}\n          src={require('./samples/mug.png')}\n          style={{\n            position: 'absolute',\n            top: 0,\n            bottom: 0,\n            objectFit: 'cover',\n            height: '100%',\n            width: '100%',\n            display: this.state.mode === MUG ? '' : 'none'\n          }}\n        />\n        <img\n          ref={ref => this.ipad = ref}\n          src={require('./samples/ipad.png')}\n          style={{\n            position: 'absolute',\n            top: 0,\n            bottom: 0,\n            objectFit: 'cover',\n            height: '100%',\n            width: '100%',\n            display: this.state.mode === IPAD ? '' : 'none'\n          }}\n        />\n        <img\n          ref={ref => this.lametric = ref}\n          src={require('./samples/lametric.png')}\n          style={{\n            position: 'absolute',\n            top: 0,\n            bottom: 0,\n            objectFit: 'cover',\n            height: '100%',\n            width: '100%',\n            display: this.state.mode === LAMETRIC ? '' : 'none'\n          }}\n        />\n        <d3fc-canvas\n          use-device-pixel-ratio\n          style={{ width: '100vw', height: '100vh' }}\n          ref={surface => this.surface = surface}\n          onClick={this.handleClick}></d3fc-canvas>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default MobileNetVisualisation;\n","import createLazyMap from '../util/lazyMap';\n\nexport default (ctx) => createLazyMap(text => ctx.measureText(text));\n","import React from 'react';\n\nexport default ({ width, height }) =>\n    <svg viewBox=\"0 0 75 75\" width={width} height={height}>\n        <path d=\"M53.2,13.2c-1.5-0.8-2.3,0.3-2.7,0.9c-0.4,0.5-5.3,8.3-5.3,8.3s-0.5,0.1-0.4-0.6c0.1-0.8,2-8.5,2.7-11.3\n            c0.4-2,0.6-3.5-1-3.8c-1.6-0.2-2.1,0.9-2.4,2C43.7,9.8,40.8,20,40.8,20s-0.8,1.1-0.9-0.1c0-1.3-0.2-12.4-0.2-12.4s0.2-3.3-2.1-3.1\n            c-2.3,0.2-2,2.3-2,2.3l0.2,12.9c0,0-0.9,1.4-1.3,0.2c-0.4-1.2-4-11.3-4-11.3S29.8,7,28.1,7.6c-1.7,0.6-1,2.5-1,2.5l3.2,11.1\n            c0,0,0.3,0.9,0.3,1.9c0,0.9-0.4,3.2-0.4,3.2l-0.4,0.9c0,0-0.1,0-0.1,0c0,0,0,0,0.1,0l-0.1,0.2c-0.2,0-0.4,0-0.4,0\n            c-3.8-6-9.1-5.6-9.1-5.6s-2,0.6-1.4,2c0.6,1.4,1,0.4,3.6,2.9c2.6,2.5,3.5,4.9,3.9,5.8c0.4,0.9,2.1,3.6,3.9,4.7\n            c1.8,1.1,2.7,1.7,2.7,1.7l-0.9,29.9l13-1.1l-1-28.2c0,0,3.3-1.9,4.3-8.7l0.2-5c0,0,0-0.4,0.3-1c0.3-0.6,4.1-7.2,4.1-7.2\n            S54.8,14,53.2,13.2z M29.8,10.9l-1,0.3c-0.4,0.1-0.9-0.1-1-0.6l-0.3-1C27.3,9,27.7,8.2,28.4,8s1.5,0.2,1.7,0.9l0.3,1\n            C30.5,10.4,30.2,10.8,29.8,10.9z M21.2,25.4c-1.4-1-1.8-0.6-2.2-1.7c-0.1-0.2-0.1-0.3-0.1-0.5c0.5,0.1,1.2,0.2,1.6,0.4\n            c0.6,0.3,1,0.5,1.2,0.8C21.7,24.5,21.5,25,21.2,25.4z M38.9,7.2c0,0.4-0.4,0.8-0.8,0.8h-1.1c-0.4,0-0.8-0.4-0.8-0.8v-1\n            c0-0.7,0.6-1.3,1.3-1.3c0.7,0,1.3,0.6,1.3,1.3L38.9,7.2z M44.6,8.8l0.3-1C45,7.2,45.8,6.8,46.5,7c0.7,0.2,1.1,0.9,0.9,1.6l-0.3,1\n            c-0.1,0.4-0.5,0.6-1,0.5l-1-0.3C44.7,9.7,44.4,9.2,44.6,8.8z M53.2,15l-0.5,0.7c-0.2,0.3-0.6,0.4-0.9,0.2l-0.7-0.5\n            c-0.3-0.2-0.4-0.6-0.2-0.9l0.5-0.7c0.3-0.5,1-0.7,1.5-0.4C53.4,13.8,53.6,14.5,53.2,15z\"/>\n    </svg>;","import React from 'react';\nimport RightHandPalmAway from './RightHandPalmAway';\n\nexport default ({ width, height }) =>\n    <svg viewBox=\"0 0 75 75\" width={width} height={height}>\n        <g transform=\"scale(-1, 1) translate(-75, 0)\">\n            <RightHandPalmAway width=\"75\" height=\"75\" />\n        </g>\n    </svg>;","import React from 'react';\nimport RightHandPalmAway from './RightHandPalmAway';\nimport LeftHandPalmAway from './LeftHandPalmAway';\nimport './index.css';\n\nexport default () =>\n    <svg className=\"hands\" viewBox=\"0 0 100 75\">\n        <g transform=\"translate(-15, 10) rotate(20, 38, 38)\">\n            <RightHandPalmAway width=\"75\" height=\"75\" />\n        </g>\n        <g transform=\"translate(40, 10) rotate(-20, 38, 38)\">\n            <LeftHandPalmAway width=\"75\" height=\"75\" />\n        </g>\n    </svg>","import React, { Component } from 'react';\nimport { BUY, SELL } from './tensorflow/classifier';\nimport HandsPalmForward from './hands/HandsPalmFacing';\nimport HandsPalmBackward from './hands/HandsPalmAway';\nimport { sleep } from './util';\nimport Layout from './Layout';\nimport leftPad from 'left-pad';\nimport Skipping from './skipping/Skipping';\n\nconst CLASSIFY_SKIP_COUNT = 20;\nconst CAPTURE_SKIP_COUNT = 0;\nconst CAPTURE_COUNT = 100;\nconst READY_PERIOD = 3000;\nconst PHASE_COUNT = 3;\nconst CAPTURE_COUNT_PER_PHASE = Math.floor(CAPTURE_COUNT / PHASE_COUNT);\nconst WAITING_FOR_FRAME = 'waiting-for-frame';\nconst WAITING_FOR_MODEL = 'waiting-for-model';\nconst PENDING_CAPTURE_BUY = 'pending-capture-buy'\nconst CAPTURING_BUY = 'capturing-buy'\nconst PENDING_CAPTURE_SELL = 'pending-capture-sell'\nconst CAPTURING_SELL = 'capturing-sell'\nconst TRAINING = 'training';\nconst CLASSIFYING = 'classifying';\n\nconst format = value => {\n  const rounded = Math.round(value * 100);\n  return `${leftPad(rounded, 3)}%`;\n};\n\nconst labelFor = ({ mode, captureCount, trainingProgress, buyProbability, sellProbability }) => {\n  switch (mode) {\n    case WAITING_FOR_FRAME:\n    case WAITING_FOR_MODEL:\n      return 'Loading';\n    case PENDING_CAPTURE_BUY:\n      return 'Long - Get Ready';\n    case CAPTURING_BUY:\n      return `Capturing... (${format(captureCount / CAPTURE_COUNT_PER_PHASE)})`\n    case PENDING_CAPTURE_SELL:\n      return 'Short - Get Ready';\n    case CAPTURING_SELL:\n      return `Capturing... (${format(captureCount / CAPTURE_COUNT_PER_PHASE)})`\n    case TRAINING:\n      return `Training... (${format(trainingProgress)})`;\n    case CLASSIFYING:\n      return `${buyProbability > sellProbability ? ' Long' : 'Short'} (${format(Math.max(buyProbability, sellProbability))})`;\n  }\n}\n\nclass Trainer extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      mode: WAITING_FOR_FRAME,\n      buyProbability: null,\n      sellProbability: null,\n      captureCount: null,\n      skipCount: null,\n      trainingProgress: 0,\n    };\n  }\n\n  componentWillUnmount() {\n    this.props.model.clearSamples();\n  }\n\n  handleFrame = async (canvas) => {\n    if (this.state.skipCount > 0) {\n      this.setState({ skipCount: this.state.skipCount - 1 });\n      return;\n    }\n    switch (this.state.mode) {\n      case WAITING_FOR_FRAME: {\n        this.setState({\n          mode: WAITING_FOR_MODEL\n        });\n        // kick off a dummy prediction to ensure the model is ready to go\n        await this.props.model.classify(canvas);\n        this.setState({\n          phase: 0,\n          captureCount: 0,\n          mode: PENDING_CAPTURE_BUY\n        });\n        await sleep(READY_PERIOD);\n        this.setState({\n          mode: CAPTURING_BUY\n        });\n        return;\n      }\n      case CAPTURING_BUY: {\n        if (this.state.captureCount >= CAPTURE_COUNT_PER_PHASE) {\n          this.setState({\n            captureCount: 0,\n            mode: PENDING_CAPTURE_SELL\n          });\n          await sleep(READY_PERIOD);\n          this.setState({\n            mode: CAPTURING_SELL\n          });\n          return;\n        }\n        this.props.model.sample(BUY, canvas);\n        this.setState({\n          captureCount: this.state.captureCount + 1,\n          skipCount: CAPTURE_SKIP_COUNT\n        });\n        return;\n      }\n      case CAPTURING_SELL: {\n        if (this.state.captureCount >= CAPTURE_COUNT_PER_PHASE) {\n          if (this.state.phase < PHASE_COUNT - 1) {\n            this.setState({\n              captureCount: 0,\n              mode: PENDING_CAPTURE_BUY,\n              phase: this.state.phase + 1\n            });\n            await sleep(READY_PERIOD);\n            this.setState({\n              mode: CAPTURING_BUY\n            });\n            return;\n          }\n          this.setState({\n            captureCount: null,\n            mode: TRAINING\n          });\n          await this.props.model.train(trainingProgress => this.setState({ trainingProgress }));\n          this.setState({\n            mode: CLASSIFYING\n          });\n          this.props.onClassifying();\n          return;\n        }\n        this.props.model.sample(SELL, canvas);\n        this.setState({\n          captureCount: this.state.captureCount + 1,\n          skipCount: CAPTURE_SKIP_COUNT\n        });\n        return;\n      }\n      case CLASSIFYING: {\n        const predictions = await this.props.model.classify(canvas);\n        const buyProbability = predictions.find(({ className }) => className === BUY).probability;\n        const sellProbability = predictions.find(({ className }) => className === SELL).probability;\n        this.setState({\n          buyProbability,\n          sellProbability,\n          skipCount: CLASSIFY_SKIP_COUNT\n        });\n        return;\n      }\n      default: {\n        // sit pretty :)\n      }\n    }\n  }\n\n  render() {\n    const { mode } = this.state;\n    return (\n      <Layout title={\n        <div style={{\n          textAlign: 'center',\n          fontSize: '8vh',\n          flex: 1,\n          padding: '2vh 0'\n        }}>\n          {labelFor(this.state)}\n        </div>\n      }>\n        {\n          (mode === PENDING_CAPTURE_BUY || mode === CAPTURING_BUY) &&\n          <HandsPalmBackward />\n        }\n        {\n          (mode === PENDING_CAPTURE_SELL || mode === CAPTURING_SELL) &&\n          <HandsPalmForward />\n        }\n        {\n          (mode === TRAINING) &&\n          <Skipping />\n        }\n      </Layout>\n    );\n  }\n}\n\nexport default Trainer;\n","module.exports = __webpack_public_path__ + \"static/media/mug.6f935464.png\";","module.exports = __webpack_public_path__ + \"static/media/ipad.6c13a3a3.png\";","module.exports = __webpack_public_path__ + \"static/media/lametric.14791009.png\";","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport { BrowserRouter } from 'react-router-dom'\n\nReactDOM.render((\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n        <App />\n    </BrowserRouter>\n), document.getElementById('root'));\nregisterServiceWorker();\n","import * as tf from '@tensorflow/tfjs';\nimport { getPartialShape, partial } from './mobilenet';\nimport createSamplesStore from './samples';\n\nexport const BUY = 'buy';\nexport const SELL = 'sell';\nconst CLASS_NAMES = [BUY, SELL];\nconst ID_TO_NAME = new Map(CLASS_NAMES.map((value, index) => [index, value]));\nconst NAME_TO_ID = new Map(CLASS_NAMES.map((value, index) => [value, index]));\nconst NUM_CLASSES = CLASS_NAMES.length;\nconst BATCH_SIZE = 20;\nconst DENSE_UNITS = 100;\nconst EPOCHS = 10;\nconst LEARNING_RATE = 0.0001;\n\nconst classifier = (model) => {\n    model.compile({\n        optimizer: tf.train.adam(LEARNING_RATE),\n        loss: 'categoricalCrossentropy'\n    });\n\n    const samples = createSamplesStore(2);\n\n    const sample = async (className, image) => {\n        const activations = await partial(image);\n        tf.tidy(() => {\n            const expectedClassIds = tf.tensor1d([NAME_TO_ID.get(className)]).toInt();\n            const expectedOutput = tf.oneHot(expectedClassIds, NUM_CLASSES);\n            samples.add(\n                activations,\n                expectedOutput\n            );\n        });\n    };\n\n    const clearSamples = () => {\n        samples.clear();\n    };\n\n    const train = (progressCallback) =>\n        new Promise((resolve) => {\n            model.fit(samples.get(0), samples.get(1), {\n                batchSize: BATCH_SIZE,\n                epochs: EPOCHS,\n                callbacks: {\n                    onEpochEnd: async (index, foo) => {\n                        if (progressCallback != null) {\n                            progressCallback((index + 1) / EPOCHS);\n                        }\n                    },\n                    onTrainEnd: resolve\n                }\n            });\n        });\n\n    const classify = async (image) => {\n        const activations = await partial(image);\n        const predictions = await model.predict(activations);\n        activations.dispose();\n        const probabilities = await predictions.data();\n        predictions.dispose();\n        return [...probabilities].map((probability, index) => ({\n            className: ID_TO_NAME.get(index),\n            probability\n        }));\n    };\n\n    const save = async (path) => {\n        await model.save(path);\n    };\n\n    return {\n        sample,\n        train,\n        classify,\n        save,\n        clearSamples\n    };\n};\n\nexport const create = () => {\n    const model = tf.sequential({\n        layers: [\n            tf.layers.flatten({\n                inputShape: getPartialShape()\n            }),\n            tf.layers.dense({\n                units: DENSE_UNITS,\n                activation: 'relu',\n                kernelInitializer: 'varianceScaling',\n                useBias: true\n            }),\n            tf.layers.dense({\n                units: NUM_CLASSES,\n                kernelInitializer: 'varianceScaling',\n                useBias: false,\n                activation: 'softmax'\n            })\n        ]\n    });\n    return classifier(model);\n}\n\nexport const load = async (path) => {\n    const model = await tf.loadModel(path);\n    return classifier(model);\n};\n","import * as tf from '@tensorflow/tfjs';\n\nconst concat = (data, sample) => {\n    if (data == null) {\n        return sample;\n    }\n    return data.map((previous, index) => {\n        const update = sample[index];\n        const updated = previous.concat(update, 0);\n        update.dispose();\n        previous.dispose();\n        return updated;\n    });\n};\n\nexport default (dimensions) => {\n    let data = null;\n\n    const add = (...sample) => {\n        if (sample.length !== dimensions) {\n            throw new Error(`Expected ${dimensions} values, received ${sample.length}`);\n        }\n        data = concat(data, sample).map(tf.keep);\n    };\n\n    const get = (dimension) => data[dimension];\n\n    const clear = () => {\n        if (data != null) {\n            for (const datum of data) {\n                datum.dispose();\n            }\n            data = null;\n        }\n    }\n\n    return {\n        add,\n        get,\n        clear\n    };\n};\n\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nconst Layout = ({ title, children, history }) =>\n    <div style={{\n        display: 'flex',\n        flexDirection: 'column',\n        width: '100vw',\n        height: '100vh',\n        opacity: 1\n    }}>\n        <div style={{\n            background: 'white',\n            margin: '2vh 0',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-around',\n            height: '10vh',\n            flexGrow: 0,\n            flexShrink: 0\n        }}\n            onClick={() => history.push('/mobilenet')}>\n            {title}\n        </div>\n        {children}\n    </div>;\n\nexport default withRouter(Layout);\n","import * as mobilenet from '@tensorflow-models/mobilenet';\n\nconst VERSION = 1;\nconst ALPHA = 0.25;\n\nlet modelPromise = null;\n\nconst loadModel = () => {\n    if (modelPromise == null) {\n        modelPromise = mobilenet.load(VERSION, ALPHA);\n    }\n    return modelPromise;\n};\n\nexport const partial = async (image) => {\n    const model = await loadModel();\n    return await model.infer(image, 'conv_pw_13_relu');\n};\n\nexport const getPartialShape = () => [7, 7, 256];\n\nexport const classify = async (image, topk) => {\n    const model = await loadModel();\n    return await model.classify(image, topk);\n};\n","export const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));","import leftPad from 'left-pad';\n\nconst currencyFormatter = new Intl.NumberFormat('en-us', { style: 'currency', currency: 'USD' });\n\nexport const currency = (value, padding = 12) =>\n  leftPad(currencyFormatter.format(value), padding);\n","import React from 'react';\nimport './index.css';\n\n// Created by Hollmann Graphic Design from Noun Project\nexport default () =>\n    <svg class=\"skipping\" viewBox=\"0 0 300 300\">\n        <path class=\"left\" d=\"M43.85,96.3c10.99-0.3,19.67-9.46,19.37-20.45c-0.1-3.63-1.17-7.01-2.94-9.9c-3.61-5.86-10.15-9.68-17.51-9.48\n            c-11,0.31-19.67,9.46-19.37,20.47C23.69,87.93,32.84,96.59,43.85,96.3z M82.95,158.02c0.9-1.85,0.05-5.81-3.01-7.37\n            c-0.28-0.14-0.61-0.27-0.98-0.35l-18.41-8.6L51.97,111c-0.8-5.95-6.28-11.02-12.88-10.87C32.31,100.28,26.93,105,26.65,111h-0.04\n            l-2.59,54h0.04c0,0,0.1,1.08,0.33,2.03c0.17,0.69,0.41,1.01,0.71,1.63l4.45,32.95l-8.71,30.89c-0.05,0.14-0.12,0.22-0.16,0.36\n            c-1.03,3.69,1.11,7.49,4.79,8.52c3.6,1.01,7.31-1.03,8.45-4.56l0.06,0.01l9.31-33.08c0.11-0.38,0.16-0.77,0.2-1.16l0.19,0.46\n            l0.18-0.06l-0.22,31.59c-0.01,0.14-0.05,0.28-0.05,0.43c-0.03,3.83,3.05,6.28,6.88,6.3c3.74,0.02,6.78-1.31,6.95-7.31h0.07\n            l0.23-32.98c0.17-1.07,0.12-1.85-0.24-2.95c-0.12-0.36-0.28-0.53-0.46-0.86L46.3,164.46l2.34-21.22l1.32,4\n            c0.68,2.12,2.44,3.57,4.47,3.99c7.17,3.19,15.71,9.28,21.51,9.58C79.67,161,82,159.96,82.95,158.02z\"/>\n        <path class=\"right\" d=\"M225.16,159.16c1.1-0.51,21.52-9.59,21.52-9.59c2.03-0.42,3.79-1.87,4.47-3.98l1.32-3.98l2.34,21.26\n            l-10.75,32.85c-0.17,0.33-0.33,0.66-0.45,1.02c-0.36,1.1-0.41,2.37-0.24,3.44l0.23,33.8h0.07c0.17,3,3.21,6.5,6.95,6.47\n            c3.83-0.02,6.91-3.22,6.88-7.06c0-0.15-0.04-0.32-0.05-0.46l-0.21-31.6l0.18,0.05l0.19-0.46c0.04,0.38,0.09,0.77,0.2,1.15\n            l9.31,33.08l0.06-0.02c1.14,3.53,4.85,5.56,8.45,4.55c3.68-1.04,5.83-4.86,4.79-8.54c-0.04-0.14-0.11-0.26-0.16-0.39l-8.71-30.98\n            l4.45-33.13c0.3-0.61,0.54-1.27,0.71-1.96c0.23-0.95,0.34-2.7,0.34-2.7h0.04l-2.59-51h-0.04c-0.27-6-5.66-11.55-12.43-11.7\n            c-6.61-0.16-12.09,4.25-12.88,10.21l-8.58,30.6l-18.21,8.48c-0.39,0.09-0.79,0.21-1.17,0.39c-2.81,1.32-4.17,4.62-3.01,7.37\n            C219.54,159.62,223.46,159.96,225.16,159.16z M256.9,96.3c10.99-0.3,19.67-9.46,19.37-20.45c-0.1-3.63-1.17-7.01-2.94-9.9\n            c-3.61-5.86-10.15-9.68-17.51-9.48c-11,0.31-19.67,9.46-19.37,20.47C236.74,87.93,245.89,96.59,256.9,96.3z\"/>\n        <path class=\"jumper\" d=\"M144.9,105.04c10.21-0.28,18.26-8.78,17.98-18.99c-0.09-3.38-1.08-6.51-2.73-9.19\n            c-3.35-5.44-9.42-8.99-16.26-8.8c-10.21,0.28-18.26,8.78-17.99,19.01C126.19,97.27,134.69,105.32,144.9,105.04z M153.81,105.91\n            c-7.06-0.14-12.88,5.36-13,11.9c-0.01,0.64,0.07,2.19,0.17,2.19h-0.1l8.09,42.44l-13.7,16.12l0.05-0.01\n            c-1.62,2.31-1.74,5.45-0.02,7.9l19.67,28.16l0.05-0.04c2.23,2.96,6.41,3.65,9.48,1.51c3.13-2.19,3.9-6.51,1.71-9.65\n            c-0.07-0.11-0.17-0.19-0.25-0.29l-16.21-23.22l17.99-17.39c0.03-0.04,0.07-0.07,0.1-0.1l0.02-0.02l0,0c1.17-1.31,1.89-3.1,1.89-5.08\n            c0-1.69-0.12-3.29-0.51-4.6l-2.6-32.48l12.07,2.91l-2.98,17.11c-0.11,0.31-0.21,0.64-0.27,0.98c-0.53,3.06,1.4,6.06,4.31,6.69\n            c2.84,0.61,5.56-1.25,6.19-4.17l0.11,0.02l4.54-23.41l-0.05-0.01c0.31-1.37,0.1-2.78-0.56-3.97c-0.67-1.64-2.03-2.98-3.87-3.5\n            l-24.33-7.13C159.65,107.07,156.89,105.97,153.81,105.91z\"/>\n        <path class=\"rope\" d=\"M223.71,158.94l-3.05,0.02c0.27,8.07-0.36,32.23-15.73,49.31C193.58,220.89,176.56,228,154.34,228\n            c-0.04,0-0.06,0-0.1,0c-22.67,0-40.54-7.09-53.12-19.83c-17-17.21-19.27-41.56-19.58-48.26c0,0,0.01-0.01,0.01-0.01l-3.05,0.02v1.19\n            c0.02,0,0.04,0,0.07,0c0.41,7.96,3.09,31.57,20.39,49.11c13.17,13.34,31.76,20.79,55.28,20.79c0.03,0,0.07,0,0.1,0\n            c23.12,0,40.9-7.41,52.84-20.69c15.79-17.57,16.8-41.65,16.53-50.89c0.01,0,0.01,0,0.02,0L223.71,158.94z\"/>\n    </svg>;","import React from 'react';\n\n// Created by Stephen Borengasser from Noun Project\nexport default ({ width, height }) =>\n    <svg viewBox=\"0 0 75 75\" width={width} height={height}>\n        <path d=\"M53.225,13.164c-1.533-0.84-2.325,0.347-2.723,0.891c-0.396,0.544-5.344,8.264-5.344,8.264s-0.546,0.148-0.396-0.643  c0.147-0.793,2.672-11.283,2.672-11.283s0.643-3.512-0.989-3.76c-1.632-0.247-2.128,0.94-2.424,2.029  c-0.298,1.089-3.217,11.38-3.217,11.38s-0.842,1.14-0.89-0.148c-0.049-1.288-0.247-12.371-0.247-12.371s0.198-3.316-2.079-3.118  c-2.276,0.198-2.028,2.327-2.028,2.327l0.197,12.865c0,0-0.891,1.433-1.288,0.198c-0.395-1.238-4.007-11.282-4.007-11.282  s-0.693-1.535-2.375-0.891c-1.682,0.644-1.04,2.523-1.04,2.523l3.217,11.084c0,0,0.296,0.941,0.296,1.879  c0,0.941-0.446,3.217-0.446,3.217l-0.372,0.86c-0.03,0-0.058-0.001-0.089-0.001c0,0,0.031,0.001,0.088,0.005l-0.088,0.202  c-0.241,0.008-0.379,0.025-0.379,0.025c-3.758-6.039-9.103-5.642-9.103-5.642s-1.979,0.594-1.381,1.979  c0.594,1.385,0.989,0.397,3.562,2.869c2.573,2.475,3.464,4.949,3.86,5.839c0.396,0.893,2.079,3.563,3.86,4.65  c1.779,1.092,2.671,1.685,2.671,1.685l-0.872,29.95l12.958-1.131l-1.004-28.225c0,0,3.268-1.88,4.255-8.709l0.247-5.048  c0,0-0.048-0.396,0.295-1.04c0.349-0.642,4.108-7.223,4.108-7.223S54.758,14.006,53.225,13.164z M38.478,33.749  c-0.104-0.248-0.209-0.479-0.319-0.709c-1.746-5.267-7.632-5.803-8.417-5.85l0.001-0.003C38.867,27.122,38.478,33.749,38.478,33.749  z\"></path>\n    </svg>;","import React from 'react';\nimport LeftHandPalmFacing from './LeftHandPalmFacing';\n\nexport default ({ width, height }) =>\n    <svg viewBox=\"0 0 75 75\" width={width} height={height}>\n        <g transform=\"scale(-1, 1) translate(-75, 0)\">\n            <LeftHandPalmFacing width=\"75\" height=\"75\" />\n        </g>\n    </svg>;","import React from 'react';\nimport LeftHandPalmFacing from './LeftHandPalmFacing';\nimport RightHandPalmFacing from './RightHandPalmFacing';\nimport './index.css';\n\nexport default () =>\n    <svg className=\"hands\" viewBox=\"0 0 100 75\">\n        <g transform=\"translate(-15, 10) rotate(20, 38, 38)\">\n            <RightHandPalmFacing width=\"75\" height=\"75\" />\n        </g>\n        <g transform=\"translate(40, 10) rotate(-20, 38, 38)\">\n            <LeftHandPalmFacing width=\"75\" height=\"75\" />\n        </g>\n    </svg>","import React from 'react';\nimport ReactWebcam from 'react-webcam'\n\nclass Webcam extends React.Component {\n\n    componentDidMount() {\n        this.scheduleAnimationFrame();\n    }\n\n\n    scheduleAnimationFrame() {\n        this.animationFrame = requestAnimationFrame(() => {\n            this.captureFrame();\n            this.scheduleAnimationFrame();\n        });\n    }\n\n    componentWillUnmount() {\n        cancelAnimationFrame(this.animationFrame);\n    }\n\n    captureFrame() {\n        if (!this.webcam.state.hasUserMedia || !this.webcam.video.videoHeight) {\n            return\n        }\n\n        if (!this.ctx) {\n            const { videoWidth, videoHeight } = this.webcam.video;\n\n            const videoSize = Math.min(videoWidth, videoHeight);\n            const canvasSize = this.props.screenshotWidth || videoSize;\n            const scale = canvasSize / videoSize;\n            const x = -0.5 * ((scale * videoWidth) - canvasSize);\n            const y = -0.5 * ((scale * videoHeight) - canvasSize);\n\n            this.canvas.width = canvasSize;\n            this.canvas.height = canvasSize;\n\n            this.ctx = this.canvas.getContext('2d');\n            this.ctx.translate(canvasSize - x, y);\n            this.ctx.scale(-scale, scale);\n        }\n\n        this.ctx.drawImage(this.webcam.video, 0, 0);\n        this.props.onFrame(this.canvas);\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                <canvas\n                    ref={canvas => this.canvas = canvas}\n                    style={{\n                        position: 'absolute',\n                        visibility: 'hidden'\n                    }}\n                />\n                <ReactWebcam\n                    ref={webcam => this.webcam = webcam}\n                    screenshotWidth={this.props.screenshotWidth}\n                    style={{\n                        objectFit: 'cover',\n                        transform: 'rotateY(180deg)',\n                        height: '100%',\n                        width: '100%'\n                    }}\n                />\n            </React.Fragment>\n        );\n    }\n}\n\nWebcam.defaultProps = {\n    onFrame: () => { },\n    style: {}\n};\n\nexport default Webcam;"],"sourceRoot":""}